<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Myth Love Journey</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Orbitron:wght@700&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Courier+Prime&display=swap');
    body {
      margin: 0; padding: 0;
      font-family: 'Montserrat', sans-serif;
      background: linear-gradient(120deg, #f7cac9, #92a8d1, #ffe0ac);
      min-height: 100vh;
      overflow-x: hidden;
      display: flex; align-items: center; justify-content: center;
      transition: background 1.2s;
      color: #333;
    }
    .center {
      background: rgba(255,255,255,0.9);
      border-radius: 18px; padding: 40px 30px; box-shadow: 0 12px 32px rgba(0,0,0,0.12);
      text-align: center; max-width: 420px; position: relative;
      user-select: none;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    input[type="text"], input[type="text"]::placeholder {
      font-size:1.2em;
      width: 75%;
      padding: 10px;
      border-radius:10px;
      border:1px solid #ccc;
      transition: border-color 0.3s ease;
      text-align: center;
      box-sizing: border-box;
    }
    input[type="text"]:focus {
      outline:none;
      border-color: #f06292;
      box-shadow: 0 0 6px #f06292;
    }
    button {
      font-size:1.1em;
      padding: 10px 26px;
      border-radius:8px;
      background: #f06292;
      border:none;
      cursor: pointer;
      color: white;
      margin-top: 20px;
      transition: background 0.3s ease;
      user-select: none;
    }
    button:hover {
      background: #e91e63;
    }
    #error, #answer-error, #no-answer-msg {
      color: #e10050;
      margin-top: 14px;
      min-height: 24px;
      font-weight: 600;
    }
    .hidden { display:none; }
    #love-message, #win-message, #question-container {
      margin-top: 18px;
      font-weight: 600;
      min-height: 48px;
      font-size: 1.15em;
      color: #bf1e57;
      opacity: 0;
      transition: opacity 1s ease;
      text-align: center;
    }
    .visible {
      opacity: 1;
    }
    #confetti-canvas {
      position: fixed;
      pointer-events: none;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: 1000;
    }
    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }
  </style>
</head>
<body>

<div id="step1" class="center">
  <h1>Welcome!</h1>
  <p>What's your name?</p>
  <input id="name-input" type="text" placeholder="Enter your name" autocomplete="off" />
  <button onclick="checkName()">Submit</button>
  <div id="error"></div>
</div>

<div id="step2" class="center hidden">
  <h2>Who loves Myth more?</h2>
  <button id="love-btn" onclick="loveClick()">I love him more</button>
  <div id="love-message"></div>
  <div id="win-message"></div>
  <div id="question-container" class="hidden" style="flex-direction: column;">
    <p style="margin-bottom:8px;">What is it tomorrow (hint your last year's story)?</p>
    <input type="text" id="kiss-input" placeholder='Your answer here...' autocomplete="off" />
    <button onclick="verifyAnswer()">Submit</button>
    <div id="answer-error"></div>
  </div>
</div>

<div id="step3" class="center hidden" style="flex-direction: column;">
  <p style="font-weight: 600; font-size: 1.3em; color: #bf1e57;">So, do you wanna love Myth forever?</p>
  <input type="text" id="forever-input" placeholder="Answer yes or no" autocomplete="off" />
  <button onclick="checkForeverAnswer()">Submit</button>
  <div id="no-answer-msg"></div>
  <div id="final-message" style="font-weight: 600; margin-top: 16px; color: #bf1e57;"></div>
  <button id="love-you-more-btn" class="hidden" style="margin-top: 20px;">No, I love you more</button>
</div>

<!-- Confetti Canvas -->
<canvas id="confetti-canvas" class="hidden"></canvas>

<script>
const validNames = [
  "rudss","rudsie","ruds","rudrani","rudrani bhandarkar"
];

// Step 1: Validate name
function checkName() {
  const input = document.getElementById('name-input').value.trim().toLowerCase();
  const error = document.getElementById('error');
  error.textContent = "";
  if (!input) {
    error.textContent = "Please enter your name.";
    return;
  }
  let matched = validNames.some(
    n => input.includes(n.replace(/ /g, '').toLowerCase())
  );
  if (!matched) {
    matched = validNames.some(function(n) {
      let a = n.replace(/ /g,'').toLowerCase(), b = input;
      if (Math.abs(a.length - b.length) > 2) return false;
      let c = 0;
      for (let i=0; i<Math.min(a.length, b.length); i++) {
        if (a[i] !== b[i]) c++;
        if (c > 2) break;
      }
      return c <= 2;
    });
  }
  if (matched) {
    document.getElementById('step1').classList.add('hidden');
    document.getElementById('step2').classList.remove('hidden');
  } else {
    error.textContent = "Sorry, only special names get the surprise!";
  }
}

// Step 2: Love button clicks and message
let clickCount = 0;
const loveMessage = document.getElementById('love-message');
const winMessage = document.getElementById('win-message');
const loveBtn = document.getElementById('love-btn');

function loveClick() {
  clickCount++;
  if (clickCount === 1) {
    loveMessage.textContent = "Noooo myth loves you more, try clicking me more again.";
    loveMessage.classList.add('visible');
    fadeIn(loveMessage);
  } else if (clickCount === 2) {
    loveMessage.textContent = "";
    loveBtn.style.display = "none";
    winMessage.textContent = "Oki you win now give myth a kissi you win.";
    winMessage.classList.add('visible');
    fadeIn(winMessage);
    launchConfetti();
    setTimeout(()=> {
      showQuestion();
    }, 2800);
  }
}

function fadeIn(element) {
  element.style.animation = 'fadeIn 1.5s ease forwards';
  setTimeout(() => {
    element.style.opacity = 1;
    element.style.animation = '';
  }, 1500);
}

function showQuestion() {
  const questionCont = document.getElementById("question-container");
  questionCont.classList.remove('hidden');
  questionCont.style.opacity = 0;
  setTimeout(() => {
    questionCont.style.transition = "opacity 1s ease";
    questionCont.style.opacity = 1;
  }, 100);
}

// Step 2: Question verification
function verifyAnswer() {
  const answerInput = document.getElementById('kiss-input');
  const answerError = document.getElementById('answer-error');
  let val = answerInput.value.trim().toLowerCase();
  answerError.textContent = "";
  let validAnswers = [
    "the myth day",
    "myth day",
    "the mythday",
    "mythday"
  ];
  if (validAnswers.includes(val)) {
    // Proceed to step 3
    document.getElementById('step2').classList.add('hidden');
    document.getElementById('step3').classList.remove('hidden');
  } else {
    answerError.textContent = "Try again! Hint: your last year's story.";
  }
}

// Confetti effect
function launchConfetti() {
  const canvas = document.getElementById("confetti-canvas");
  const ctx = canvas.getContext("2d");
  canvas.classList.remove('hidden');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  const pieces = [];
  const colors = ["#f44336", "#e91e63", "#9c27b0", "#2196f3", "#00bcd4", "#4caf50", "#ffeb3b"];
  const gravity = 0.5;
  const terminalVelocity = 5;
  const count = 150;

  function randomRange(min, max) {
    return Math.random() * (max - min) + min;
  }

  function ConfettiPiece() {
    this.x = Math.random() * canvas.width;
    this.y = Math.random() * canvas.height - canvas.height;
    this.size = randomRange(7, 12);
    this.color = colors[Math.floor(Math.random() * colors.length)];
    this.rotation = randomRange(0, 2 * Math.PI);
    this.rotationSpeed = randomRange(-0.1, 0.1);
    this.velocityX = randomRange(-2, 2);
    this.velocityY = randomRange(1, 3);
  }

  ConfettiPiece.prototype.update = function () {
    this.velocityY += gravity;
    this.velocityY = Math.min(this.velocityY, terminalVelocity);
    this.x += this.velocityX;
    this.y += this.velocityY;
    this.rotation += this.rotationSpeed;

    if(this.y > canvas.height) {
      this.y = 0 - this.size;
      this.x = Math.random() * canvas.width;
      this.velocityY = randomRange(1, 3);
      this.velocityX = randomRange(-2, 2);
    }
  };

  ConfettiPiece.prototype.draw = function (ctx) {
    ctx.save();
    ctx.translate(this.x, this.y);
    ctx.rotate(this.rotation);
    ctx.fillStyle = this.color;
    ctx.fillRect(-this.size/2, -this.size/2, this.size, this.size * 0.4);
    ctx.restore();
  };

  for(let i = 0; i < count; i++) {
    pieces.push(new ConfettiPiece());
  }

  function update() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    pieces.forEach(p => {
      p.update();
      p.draw(ctx);
    });
    requestAnimationFrame(update);
  }

  update();

  // Stop confetti after 5 seconds
  setTimeout(() => {
    canvas.classList.add('hidden');
    ctx.clearRect(0, 0, canvas.width, canvas.height);
  }, 5000);
}

// Step 3: Check "love forever" answer
function checkForeverAnswer() {
  const input = document.getElementById('forever-input').value.trim().toLowerCase();
  const noMsg = document.getElementById('no-answer-msg');
  const finalMsg = document.getElementById('final-message');
  const btn = document.getElementById('love-you-more-btn');
  noMsg.textContent = "";
  finalMsg.textContent = "";
  btn.classList.add('hidden');

  if (input === "yes") {
    finalMsg.textContent = "I love you more!";
    launchConfetti();
    btn.classList.remove('hidden');
  } else if (input === "no") {
    noMsg.textContent = "Wrong answer.";
  } else {
    noMsg.textContent = "Please answer yes or no.";
  }
}

// Button click loop
const loveYouMoreBtn = document.getElementById('love-you-more-btn');
loveYouMoreBtn.addEventListener('click', () => {
  alert("No, I love you more");
});
</script>

</body>
</html>
