<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Myth Love Journey</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');
    body {
      margin: 0; padding: 0;
      font-family: 'Montserrat', sans-serif;
      background: linear-gradient(120deg, #f7cac9, #92a8d1, #ffe0ac);
      min-height: 100vh;
      display: flex; align-items: center; justify-content: center;
      transition: background 1.2s;
      color: #333;
    }
    .center {
      background: rgba(255,255,255,0.95);
      border-radius: 18px; padding: 40px 30px; box-shadow: 0 12px 32px rgba(0,0,0,0.12);
      text-align: center; max-width: 440px; position: relative;
      user-select: none;
    }
    input[type="text"] {
      font-size:1.2em;
      width: 75%;
      padding: 10px;
      border-radius:10px;
      border:1px solid #ccc;
      transition: border-color 0.3s ease;
    }
    input[type="text"]:focus {
      outline:none;
      border-color: #f06292;
      box-shadow: 0 0 6px #f06292;
    }
    button {
      font-size:1.1em;
      padding: 10px 26px;
      border-radius:8px;
      background: #f06292;
      border:none;
      cursor: pointer;
      color: white;
      margin-top: 20px;
      transition: background 0.3s ease;
      user-select: none;
    }
    button:hover {
      background: #e91e63;
    }
    #error, #answer-error, #yesno-error {
      color: #e10050;
      margin-top: 14px;
      min-height: 24px;
      font-weight: 600;
    }
    .hidden { display:none; }

    #popup-photo {
      max-width: 220px;
      margin: 16px auto 10px auto;
      border-radius: 16px;
      box-shadow: 0 6px 24px rgba(180, 73, 121, 0.18);
      display:block;
    }
    .fade-in {
      animation: fadeIn 1.3s cubic-bezier(.4, .08, .32, 1);
    }
    @keyframes fadeIn {
      from { opacity:0; transform: scale(0.95);}
      to { opacity:1; transform: scale(1);}
    }
    #iloveu-box {
      background: #fff5fa;
      color: #bf1e57;
      border-radius: 14px;
      padding: 22px 18px 14px 18px;
      margin: 30px auto 18px auto;
      box-shadow: 0 4px 24px rgba(237, 116, 153, 0.12);
      font-size: 1.45em;
      max-width: 320px;
      min-height: 60px;
      font-weight: 600;
      letter-spacing: 0.01em;
      display: flex; flex-direction: column; align-items: center;
      animation: fadeIn 1s;
    }
    #iloveyoumore-btn {
      margin-top: 12px;
      background: #fe7ba0;
      color: #fff;
      border-radius: 24px;
      padding: 10px 30px;
      font-size:1.13em;
      font-weight: 500;
      border:none;
      transition: background 0.2s;
      cursor: pointer;
    }
    #iloveyoumore-btn:hover {
      background: #fd5a8a;
    }
    /* Popup styles */
    #img-popup {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      background: rgba(255,255,255,0.99);
      box-shadow: 0 12px 38px rgba(0,0,0,0.20);
      border-radius: 22px;
      position: fixed;
      left:50%; top: 18vh;
      transform: translateX(-50%);
      z-index: 99;
      max-width: 95vw;
      padding: 32px 16px 25px 16px;
      text-align: center;
      outline: none;
    }
  </style>
</head>
<body>

<div id="step1" class="center">
  <h1>Welcome!</h1>
  <p>What's your name?</p>
  <input id="name-input" type="text" placeholder="Enter your name" autocomplete="off" />
  <br/>
  <button onclick="checkName()">Submit</button>
  <div id="error"></div>
</div>

<div id="step2" class="center hidden">
  <h2>Who loves Myth more?</h2>
  <button id="love-btn" onclick="loveClick()">I love him more</button>
  <div id="love-message"></div>
  <div id="win-message"></div>
  <div id="question-container" class="hidden">
    <p style="margin-bottom:8px;">What is it tomorrow (hint your last year's story)?</p>
    <input type="text" id="kiss-input" placeholder='Your answer here...' autocomplete="off" />
    <button onclick="verifyAnswer()">Submit</button>
    <div id="answer-error"></div>
  </div>
</div>

<!-- Photo/question popup modal (initially hidden) -->
<div id="img-popup" class="hidden" tabindex="0">
  <img id="popup-photo" src="" alt="Popup photo"/>
  <div id="photo-question" style="font-size:1.2em; margin: 16px 0 10px 0;">do you wanna have this forever?</div>
  <input type="text" id="yesno-input" placeholder="yes / no ..." style="font-size:1.15em; margin-bottom:6px;"/>
  <button onclick="verifyYesNo()">Submit</button>
  <div id="yesno-error"></div>
</div>

<!-- I love you box -->
<div id="iloveu-box" class="hidden">
  <span id="iloveu-text">i love you</span>
  <button id="iloveyoumore-btn" onclick="loveMore()">i love you more</button>
</div>

<script>
// Name verification logic
const validNames = [
  "rudss","rudsie","ruds","rudrani","rudrani bhandarkar"
];

function checkName() {
  const input = document.getElementById('name-input').value.trim().toLowerCase();
  const error = document.getElementById('error');
  error.textContent = "";
  if (!input) {
    error.textContent = "Please enter your name.";
    return;
  }
  let matched = validNames.some(
    n => input.includes(n.replace(/ /g, '').toLowerCase())
  );
  if (!matched) {
    matched = validNames.some(function(n) {
      let a = n.replace(/ /g,'').toLowerCase(), b = input;
      if (Math.abs(a.length - b.length) > 2) return false;
      let c = 0;
      for (let i=0; i<Math.min(a.length, b.length); i++) {
        if (a[i] !== b[i]) c++;
        if (c > 2) break;
      }
      return c <= 2;
    });
  }
  if (matched) {
    document.getElementById('step1').classList.add('hidden');
    document.getElementById('step2').classList.remove('hidden');
  } else {
    error.textContent = "Sorry, only special names get the surprise!";
  }
}

// Love button interaction
let clickCount = 0;
const loveMessage = document.getElementById('love-message');
const winMessage = document.getElementById('win-message');
const loveBtn = document.getElementById('love-btn');

function loveClick() {
  clickCount++;
  if (clickCount === 1) {
    loveMessage.textContent = "Noooo myth loves you more, try clicking me more again.";
    loveMessage.classList.add('visible');
    fadeIn(loveMessage);
  } else if (clickCount === 2) {
    loveMessage.textContent = "";
    loveBtn.style.display = "none";
    winMessage.textContent = "Oki you win now give myth a kissi you win.";
    winMessage.classList.add('visible');
    fadeIn(winMessage);
    setTimeout(()=> {
      showQuestion();
    }, 1300);
  }
}

function fadeIn(element) {
  element.style.animation = 'fadeIn 1.2s ease forwards';
  setTimeout(() => {
    element.style.opacity = 1;
    element.style.animation = '';
  }, 1200);
}

function showQuestion() {
  const questionCont = document.getElementById("question-container");
  questionCont.classList.remove('hidden');
  questionCont.style.opacity = 0;
  setTimeout(() => {
    questionCont.style.transition = "opacity 1s ease";
    questionCont.style.opacity = 1;
  }, 100);
}

// Myth Day answer verifies, then shows popup with photo and yes/no input
function verifyAnswer() {
  const answerInput = document.getElementById('kiss-input');
  const answerError = document.getElementById('answer-error');
  let val = answerInput.value.trim().toLowerCase();
  answerError.textContent = "";
  let validAnswers = [
    "the myth day",
    "myth day",
    "the mythday",
    "mythday"
  ];
  if (validAnswers.includes(val)) {
    // Hide current step, show popup
    document.getElementById('step2').classList.add('hidden');
    showImgPopup();
  } else {
    answerError.textContent = "Try again! Hint: your last year's story.";
  }
}

// Show the modal popup with image and yes/no question
function showImgPopup() {
  const popup = document.getElementById('img-popup');
  const photo = document.getElementById('popup-photo');
  // Set attached photo as src
  photo.src = "image.jpeg";
  popup.classList.remove('hidden');
  photo.classList.add('fade-in');
  popup.focus();
}

function verifyYesNo() {
  const input = document.getElementById('yesno-input').value.trim().toLowerCase();
  const error = document.getElementById('yesno-error');
  error.textContent = "";
  if (!input) {
    error.textContent = "Please type yes or no :)";
    return;
  }
  if (input === 'no') {
    error.textContent = "wrong answer";
    document.getElementById('yesno-input').value = "";
  } else if (input === 'yes') {
    document.getElementById('img-popup').classList.add('hidden');
    startLoveLoop();
  } else {
    error.textContent = "Please type yes or no.";
  }
}

// Looping I love you window
function startLoveLoop() {
  const box = document.getElementById('iloveu-box');
  box.classList.remove('hidden');
  document.getElementById('iloveu-text').textContent = "i love you";
}

function loveMore() {
  const text = document.getElementById('iloveu-text');
  if (text.textContent === "i love you") {
    text.textContent = "no i love you more";
  } else {
    text.textContent = "i love you more";
  }
}

</script>

</body>
</html>
