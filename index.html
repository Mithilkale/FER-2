<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Myth Love Journey</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Orbitron:wght@700&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Courier+Prime&display=swap');
    body {
      margin: 0; padding: 0;
      font-family: 'Montserrat', sans-serif;
      background: linear-gradient(120deg, #f7cac9, #92a8d1, #ffe0ac);
      min-height: 100vh;
      overflow-x: hidden;
      display: flex; align-items: center; justify-content: center;
      transition: background 1.2s;
      color: #333;
    }
    .center {
      background: rgba(255,255,255,0.9);
      border-radius: 18px; padding: 40px 30px; box-shadow: 0 12px 32px rgba(0,0,0,0.12);
      text-align: center; max-width: 420px; position: relative;
      user-select: none;
    }
    input[type="text"] {
      font-size:1.2em;
      width: 75%;
      padding: 10px;
      border-radius:10px;
      border:1px solid #ccc;
      transition: border-color 0.3s ease;
    }
    input[type="text"]:focus {
      outline:none;
      border-color: #f06292;
      box-shadow: 0 0 6px #f06292;
    }
    button {
      font-size:1.1em;
      padding: 10px 26px;
      border-radius:8px;
      background: #f06292;
      border:none;
      cursor: pointer;
      color: white;
      margin-top: 20px;
      transition: background 0.3s ease;
      user-select: none;
    }
    button:hover {
      background: #e91e63;
    }
    #error {
      color: #e10050;
      margin-top: 14px;
      min-height: 24px;
      font-weight: 600;
    }

    .hidden { display:none; }

    #love-message, #win-message, #question-container, #timer-container {
      margin-top: 18px;
      font-weight: 600;
      min-height: 48px;
      font-size: 1.15em;
      color: #bf1e57;
      opacity: 0;
      transition: opacity 1s ease;
    }
    .visible {
      opacity: 1;
    }

    #kiss-input {
      margin-top: 12px;
      width: 75%;
      font-size: 1.1em;
      padding: 8px 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
      display: block;
      margin-left: auto;
      margin-right: auto;
      transition: border-color 0.3s ease;
    }

    #kiss-input:focus {
      outline: none;
      border-color: #f06292;
      box-shadow: 0 0 6px #f06292;
    }

    #confetti-canvas {
      position: fixed;
      pointer-events: none;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: 1000;
    }

    /* Flip countdown timer styles */
    #timer-container {
      font-family: 'Orbitron', monospace;
      font-weight: 700;
      font-size: 2.8em;
      letter-spacing: 0.1em;
      color: #a32a3a;
      background: linear-gradient(145deg, #fce9e5, #f8d4d9);
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(163, 42, 58, 0.35);
      padding: 20px 24px;
      user-select: none;
      line-height: 1.1;
      margin-top: 24px;
    }
    #timer-subtext {
      font-family: 'Courier Prime', monospace;
      font-weight: 500;
      font-size: 1.1em;
      color: #7a414a;
      margin-top: 12px;
      letter-spacing: 0.05em;
    }

    /* Fade in animation */
    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }
  </style>
</head>
<body>

<div id="step1" class="center">
  <h1>Welcome!</h1>
  <p>What's your name?</p>
  <input id="name-input" type="text" placeholder="Enter your name" autocomplete="off" />
  <br/>
  <button onclick="checkName()">Submit</button>
  <div id="error"></div>
</div>

<div id="step2" class="center hidden">
  <h2>Who loves Myth more?</h2>
  <button id="love-btn" onclick="loveClick()">I love him more</button>
  <div id="love-message"></div>
  <div id="win-message"></div>
  <div id="question-container" class="hidden">
    <p style="margin-bottom:8px;">What is it tomorrow (hint your last year's story)?</p>
    <input type="text" id="kiss-input" placeholder='Your answer here...' autocomplete="off" />
    <button onclick="verifyAnswer()">Submit</button>
    <div id="answer-error" style="color:#e10050; margin-top:8px; min-height:20px; font-weight: 600;"></div>
  </div>
</div>

<div id="step3" class="center hidden" style="flex-direction: column;">
  <div id="timer-container"></div>
  <div id="timer-subtext">The day till I can officially call you my wifie (I mean not the official day but like 8 years gettit bish)</div>
</div>


<!-- Confetti Canvas -->
<canvas id="confetti-canvas" class="hidden"></canvas>

<script>
// Initial name verification as before
const validNames = [
  "rudss","rudsie","ruds","rudrani","rudrani bhandarkar"
];

function checkName() {
  const input = document.getElementById('name-input').value.trim().toLowerCase();
  const error = document.getElementById('error');
  error.textContent = "";
  if (!input) {
    error.textContent = "Please enter your name.";
    return;
  }
  let matched = validNames.some(
    n => input.includes(n.replace(/ /g, '').toLowerCase())
  );
  if (!matched) {
    matched = validNames.some(function(n) {
      let a = n.replace(/ /g,'').toLowerCase(), b = input;
      if (Math.abs(a.length - b.length) > 2) return false;
      let c = 0;
      for (let i=0; i<Math.min(a.length, b.length); i++) {
        if (a[i] !== b[i]) c++;
        if (c > 2) break;
      }
      return c <= 2;
    });
  }
  if (matched) {
    document.getElementById('step1').classList.add('hidden');
    document.getElementById('step2').classList.remove('hidden');
  } else {
    error.textContent = "Sorry, only special names get the surprise!";
  }
}

// Love button interaction
let clickCount = 0;
const loveMessage = document.getElementById('love-message');
const winMessage = document.getElementById('win-message');
const loveBtn = document.getElementById('love-btn');

function loveClick() {
  clickCount++;
  if (clickCount === 1) {
    loveMessage.textContent = "Noooo myth loves you more, try clicking me more again.";
    loveMessage.classList.add('visible');
    fadeIn(loveMessage);
  } else if (clickCount === 2) {
    loveMessage.textContent = "";
    loveBtn.style.display = "none";
    winMessage.textContent = "Oki you win now give myth a kissi you win.";
    winMessage.classList.add('visible');
    fadeIn(winMessage);
    launchConfetti();
    setTimeout(()=> {
      showQuestion();
    }, 2800);
  }
}

function fadeIn(element) {
  element.style.animation = 'fadeIn 1.5s ease forwards';
  setTimeout(() => {
    element.style.opacity = 1;
    element.style.animation = '';
  }, 1500);
}

function showQuestion() {
  const questionCont = document.getElementById("question-container");
  questionCont.classList.remove('hidden');
  questionCont.style.opacity = 0;
  setTimeout(() => {
    questionCont.style.transition = "opacity 1s ease";
    questionCont.style.opacity = 1;
  }, 100);
}

// Answer verification
function verifyAnswer() {
  const answerInput = document.getElementById('kiss-input');
  const answerError = document.getElementById('answer-error');
  let val = answerInput.value.trim().toLowerCase();
  answerError.textContent = "";
  let validAnswers = [
    "the myth day",
    "myth day",
    "the mythday",
    "mythday"
  ];
  if (validAnswers.includes(val)) {
    // Go to timer page
    document.getElementById('step2').classList.add('hidden');
    document.getElementById('step3').classList.remove('hidden');
    initCountdown();
  } else {
    answerError.textContent = "Try again! Hint: your last year's story.";
  }
}

// Confetti effect code reused from before
function launchConfetti() {
  const canvas = document.getElementById("confetti-canvas");
  const ctx = canvas.getContext("2d");
  canvas.classList.remove('hidden');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  const pieces = [];
  const colors = ["#f44336", "#e91e63", "#9c27b0", "#2196f3", "#00bcd4", "#4caf50", "#ffeb3b"];
  const gravity = 0.5;
  const drag = 0.075;
  const terminalVelocity = 5;
  const count = 150;

  function randomRange(min, max) {
    return Math.random() * (max - min) + min;
  }

  function ConfettiPiece() {
    this.x = Math.random() * canvas.width;
    this.y = Math.random() * canvas.height - canvas.height;
    this.size = randomRange(7, 12);
    this.color = colors[Math.floor(Math.random() * colors.length)];
    this.rotation = randomRange(0, 2 * Math.PI);
    this.speed = randomRange(2, 5);
    this.opacity = randomRange(0.7, 1);
    this.rotationSpeed = randomRange(-0.1, 0.1);
    this.velocityX = randomRange(-2, 2);
    this.velocityY = randomRange(1, 3);
  }

  ConfettiPiece.prototype.update = function () {
    this.velocityY += gravity;
    this.velocityY = Math.min(this.velocityY, terminalVelocity);
    this.x += this.velocityX;
    this.y += this.velocityY;
    this.rotation += this.rotationSpeed;

    if(this.y > canvas.height) {
      this.y = 0 - this.size;
      this.x = Math.random() * canvas.width;
      this.velocityY = randomRange(1, 3);
      this.velocityX = randomRange(-2, 2);
    }
  };

  ConfettiPiece.prototype.draw = function (ctx) {
    ctx.save();
    ctx.translate(this.x, this.y);
    ctx.rotate(this.rotation);
    ctx.fillStyle = this.color;
    ctx.fillRect(-this.size/2, -this.size/2, this.size, this.size * 0.4);
    ctx.restore();
  };

  for(let i = 0; i < count; i++) {
    pieces.push(new ConfettiPiece());
  }

  function update() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    pieces.forEach(p => {
      p.update();
      p.draw(ctx);
    });
    requestAnimationFrame(update);
  }

  update();

  // Stop confetti after 5 seconds
  setTimeout(() => {
    canvas.classList.add('hidden');
    ctx.clearRect(0, 0, canvas.width, canvas.height);
  }, 5000);
}

// Countdown timer to 1 Jan 2032
function initCountdown() {
  const timerContainer = document.getElementById('timer-container');
  const targetDate = new Date('2032-01-01T00:00:00Z').getTime();

  function updateTimer() {
    const now = new Date().getTime();
    const diff = targetDate - now;

    if(diff < 0) {
      timerContainer.textContent = "The day has arrived!";
      clearInterval(interval);
      return;
    }

    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff % (1000 * 60 * 60 *24)) / (1000*60*60));
    const minutes = Math.floor((diff % (1000*60*60)) / (1000*60));
    const seconds = Math.floor((diff % (1000*60)) / 1000);

    timerContainer.textContent = 
      `${days}d : ${String(hours).padStart(2,'0')}h : ${String(minutes).padStart(2,'0')}m : ${String(seconds).padStart(2,'0')}s`;
  }

  updateTimer();
  const interval = setInterval(updateTimer, 1000);
}

</script>

</body>
</html>
